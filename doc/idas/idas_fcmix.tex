%%==============================================================================
\chapter{Using IDAS for Fortran Applications}\label{s:idasfort}
%%==============================================================================

A Fortran 2003 module (\id{fidas\_mod}) is provided to support the use of
{\idas}, for the solution of DAE systems and performing forward sensitivity analysis
or adjoint sensitivity analysis in a mixed Fortran/{\CC} setting. While {\idas} is
written in {\CC}, it is assumed here that the user's calling program and user-supplied
problem-defining routines are written in Fortran.

%%==============================================================================
% Fortran 2003 Interfaces.
%%==============================================================================

\let\sectiontype\subsection
\section{IDAS Fortran 2003 Interface Module}\label{s:idasf2003}

The \ID{fidas\_mod} Fortran module defines interfaces to most {\idas} {\CC}
functions using the intrinsic \id{iso\_c\_binding} module which provides a
standardized mechanism for interoperating with {\CC}. All interfaced functions
are named after the corresponding {\CC} function, but with a leading `F'. For
example, the {\idas} function \id{IDACreate} is interfaced as
\id{FIDACreate}. Thus, the steps to use {\idas} and the function calls in
Fortran 2003 are identical (ignoring language differences) to those in {\CC}. The
{\CC} functions with Fortran 2003 interfaces indicate this in their description in
Chapters \ref{s:simulation}, \ref{s:forward}, and \ref{s:adjoint} . The Fortran
2003 {\idas} interface module can be accessed by the \id{use} statement, i.e.
\id{use fidas\_mod}, and linking to the library
\id{libsundials\_fidas\_mod}.{\em lib} in addition to
\id{libsundials\_idas}.{\em lib}.

% Pull in sections on portability and data types.
\input{fortran2003}
